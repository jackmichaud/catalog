{% extends "base.html" %}
{% block title %}Community{% endblock %}
{% block content %}
<div class="page-container">
    <h1 class="page-title">Community</h1>
    <p class="page-text">
        Join the growing CataLog community! Connect with other users and share your findings.
    </p>

    <section class="community-section">
        <h2>Community Members</h2>
        
        <div class="conversations-list">
            {% for other_user in other_users %}
            <div class="conversation-card">
                <div class="conversation-avatar">
                    {% if other_user.avatar and other_user.avatar.public_url %}
                    <img src="{{ other_user.avatar.public_url }}" alt="{{ other_user.username }}'s avatar"
                        style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">
                    {% else %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 24 24" fill="#2e7d32">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                    </svg>
                    {% endif %}
                </div>
                <div class="conversation-name">
                                    {{ other_user.nickname|default:other_user.username }}
                        </div>
                <span class="user-role">({{ other_user.role }})</span>
                {% if user.is_authenticated %}
                <a href="{% url 'create_conversation' user_id=other_user.id %}" class="community-btn">{{ other_user.conversant|yesno:"View conversation,Start chat" }}</a>
                {% endif %}
            </div>
            {% empty %}
            <div class="no-users">Log in to see community members!</div>
            {% endfor %}
        </div>
                
        
    </section>
</div>
{% endblock %}