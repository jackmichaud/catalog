{% extends "base.html" %}
{% block title %}Community{% endblock %}
{% block content %}
<div class="page-container">
    <h1 class="page-title">Community</h1>
    <p class="page-text">
        Join the growing CataLog community! Connect with other users and share your findings.
    </p>

    <section class="community-section">
        <h2>Community Members</h2>
        
        <div class="conversations-list">
            {% for other_user in other_users %}
            <div class="conversation-card">
                {% if other_user.avatar %}
                <img src="{{ other_user.avatar.url }}" alt="{{ other_user.username }}'s avatar"
                    style="width: 50px; height: 50px; border-radius: 50%;">
                {% else %}
                <div style="width: 50px; height: 50px; border-radius: 50%; background-color: #ccc;"></div>
                {% endif %}
                <div class="conversation-name">
                                    {{ other_user.nickname|default:other_user.username }}
                        </div>
                <span class="user-role">({{ user.role }})</span>
                {% if user.is_authenticated %}
                <a href="{% url 'create_conversation' user_id=other_user.id %}" class="community-btn">{{ other_user.conversant|yesno:"View conversation,Start chat" }}</a>
                {% endif %}
            </div>
            {% empty %}
            <div class="no-users">Log in to see community members!</div>
            {% endfor %}
        </div>
                
        
    </section>
</div>
{% endblock %}